<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Frameset//EN">
<html>
<head>
<title>System State Machine</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="generator" content="Doc-O-Matic" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <link rel="STYLESHEET" href="default.css" type="text/css" />

<script type="text/javascript" src="scripts.js"></script>
</head>
<body class="Element700" onload="onBodyLoadEx('frames.html', 'topic', '01366.html');" onmousedown="onBodyMouseDown();">

<!-- Begin Popups -->

<!-- End Popups -->

<!-- Begin Page Header -->
<div class="Element710" id="areafixed">
<div class="Element94">
<a href="01363.html" target="topic">System Service Libraries Help</a> &gt; <a href="01364.html" target="topic">System Services Libraries Overview</a> &gt; <a href="01366.html" target="topic">System State Machine</a></div>
<div class="Element92">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="25%">
<div class="Element1">
MPLAB Harmony Help Template</div>
</td><td width="25%">
<div class="Element2">
<a href="contents.html" target="tocidx">Contents</a> | <a href="00020.html" target="topic">Home</a></div>
</td><td width="25%">
<div class="Element90">
<a href="01351.html" target="topic">Previous</a> | <a href="01364.html" target="topic">Up</a> | <a href="01354.html" target="topic">Next</a></div>
</td><td width="25%">
<div class="Element96">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: SYSTEM System State Machine Topic Title: System State Machine)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com" target="_blank">Microchip Support</a></div>
</td></tr></table><div class="Element5">
System State Machine</div>
</div>
</div>

<!-- End Page Header -->

<!-- Begin Client Area -->
<div class="Element720" id="areascroll">
<div class="Element721">

<!-- Begin Page Content -->
<a name="PageContent"></a><div class="Element58">
<a name="4465736372697074696F6E"></a><div class="Element11">
<div class="Element10">
<p class="Element10">
In its most basic configuration, a MPLAB Harmony system operates in a single polled <i>super </i>loop that is implemented in the project’s <i>main</i> function (in the <span class="Element146">&lt;project-name&gt;/firmware/src/main.c</span> file) that is generated by the MHC, as shown in the following example. The <i>main</i> function calls two system-wide state machine functions, SYS_Initialize and SYS_Tasks that are also generated by the MHC to initialize and run the system.</p><div class="Element15">
MPLAB Harmony &quot;main&quot; Function</div>
<div class="Element13"><div class="Element12"><pre class="Element12">MAIN_RETURN main ( <strong><span style="color: #000080">void</span></strong> )
{
    SYS_Initialize(NULL);

    <strong><span style="color: #000080">while</span></strong>(<strong><span style="color: #000080">true</span></strong>)
    {
        SYS_Tasks();
    }

    <strong><span style="color: #000080">return</span></strong>(EXIT_FAILURE);
}</pre></div></div>
<p class="Element10">
The SYS_Initialize function calls the initialization functions for all library and application modules that are used in the system to place them in their initial states. Each module’s initialization function must prepare the module so it is safe to call its <i>Tasks</i> function(s). The SYS_Initialize function’s implementation (and necessary support code) is generated by the MHC in the <span class="Element146">&lt;project-name&gt;/firmware/src/system_config/&lt;configuration-name&gt;/system_init.c</span> file.&nbsp;</p>
<p class="Element10">
After initializing all modules, the <i>main</i> function contains the system-wide super loop that executes continuously until the system is powered off or reset. Inside the super loop, the <i>main</i> function calls the SYS_Tasks function. This function in turn calls the <i>Tasks</i> functions for any library or application modules whose state machines operate in a polled manner in the system. Of course, those state machines must first have been initialized by a prior call to their initialization functions by the SYS_Initialize function. The SYS_Task function’s implementation is also generated by the MHC, but it is contained in the <span class="Element146">&lt;project-name&gt;/firmware/src/system_config/&lt;configuration-name&gt;/system_tasks.c</span> file.&nbsp;</p>
<p class="Element10">
The polled super loop configuration described above is the most basic configuration of a MPLAB Harmony project. However, a single MPLAB Harmony project can have multiple configurations and different configurations may change modules so that they operate either polled or interrupt driven or in an RTOS thread. However, regardless of the configuration selected, the <i>main</i> function does not normally change.</p><div class="Element15">
MPLAB Harmony Documentation Volumes</div>
<p class="Element10">
For further information on MPLAB Harmony configurations and execution models, refer to the following MPLAB Harmony documentation.</p>
<ul class="Element630">
<li class="Element600"><span class="Element145">Volume I: Getting Started with MPLAB Harmony</span></li>
<li class="Element600"><span class="Element145">Volume III: MPLAB Harmony Configurator (MHC)</span></li>
<li class="Element600"><span class="Element145">Volume IV: MPLAB Harmony Development</span></li>
</ul><div class="Element63">
<div class="TableDiv">
<table cellspacing="0" class="Table2">
<tr>
<td class="Element67" valign="top" width="10%" style="border:none;">
<div class="Element68">
<img src="Note Icon.png" border="0" alt="" title=""> <strong>Note:</strong>&nbsp;</div></td><td class="Element67" valign="top" width="90%" style="border:none;">
<div class="Element68">
Although the MPLAB Harmony <i>main</i> function and system state machine functions (and other system configuration code) are generated as part of a MPLAB Harmony project for your convenience, these files are unique to your project and can be modified or implemented by other means if so desired, or even removed from the project to create a binary library (<span class="Element146">.a</span> file) containing all configured MPLAB Harmony libraries. Refer to the <i>&quot;MPLAB® X IDE User's Guide&quot;</i> (DS50002027) and the <i>&quot;MPLAB® XC32 C/C++ Compiler User's Guide&quot;</i> (DS50001686) for information on creating library projects (both documents are available for download from the Microchip website: <a href="#" onclick="openExternalLink('http://www.microchip.com');"><img src="indicator_external_link.gif" border="0" alt="" title="">www.microchip.com</a>).&nbsp;</div></td></tr></table></div></div>
</div>
</div>
</div>
<!-- End Page Content -->

<!-- Begin Page Footer -->
<div class="Element95">
<a href="01363.html" target="topic">System Service Libraries Help</a> &gt; <a href="01364.html" target="topic">System Services Libraries Overview</a> &gt; <a href="01366.html" target="topic">System State Machine</a></div>
<div class="Element93">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="25%">
<div class="Element3">
MPLAB Harmony Help Template</div>
</td><td width="25%">
<div class="Element4">
<a href="contents.html" target="tocidx">Contents</a> | <a href="00020.html" target="topic">Home</a></div>
</td><td width="25%">
<div class="Element91">
<a href="01351.html" target="topic">Previous</a> | <a href="01364.html" target="topic">Up</a> | <a href="01354.html" target="topic">Next</a></div>
</td><td width="25%">
<div class="Element97">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: SYSTEM System State Machine Topic Title: System State Machine)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com" target="_blank">Microchip Support</a></div>
</td></tr></table></div>

<!-- End Page Footer -->
</div>
</div>

<!-- End Client Area -->
</body></html>